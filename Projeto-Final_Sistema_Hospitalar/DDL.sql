CREATE TABLE SETOR (
    ID_SETOR NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY, 
    NOME_SETOR VARCHAR2(200) NOT NULL, 
    BLOCO VARCHAR2(200), 
    TIPO_SETOR VARCHAR2(200) 
);

CREATE TABLE PACIENTE (
    ID_PACIENTE NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY, 
    NOME        VARCHAR2(200) NOT NULL, 
    CPF         NUMBER UNIQUE NOT NULL,
    PLANO       VARCHAR2(200) 
    DATA_NASCIMENTO DATE
);

CREATE TABLE MEDICO (
    ID_MEDICO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY, 
    CRM       NUMBER UNIQUE NOT NULL, 
    ESPECIALIDADE VARCHAR2(200)
);

CREATE TABLE ENFERMEIRO (
    ID_ENFERMEIRO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME          VARCHAR2(200) NOT NULL,
    COREN         NUMBER UNIQUE NOT NULL,
    ID_SETOR      NUMBER,
    FOREIGN KEY (ID_SETOR) REFERENCES SETOR(ID_SETOR)
);

CREATE TABLE LEITO (
    ID_LEITO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    STATUS_LEITO VARCHAR2(200),
    ID_SETOR NUMBER NOT NULL,
    FOREIGN KEY (ID_SETOR) REFERENCES SETOR(ID_SETOR)
);

CREATE TABLE EXAME (
    ID_EXAME NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(200) NOT NULL,
    TIPO_EXAME VARCHAR2(200) NOT NULL,
    DESCRICAO VARCHAR2(200)
);

CREATE TABLE ATENDIMENTO (
    ID_ATENDIMENTO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    AGENDAMENTO    VARCHAR2(200),
    DIAGNOSTICO    VARCHAR2(200),
    OBSERVACOES    VARCHAR2(200),
    DATA_ALTA      DATE,

    ID_PACIENTE NUMBER NOT NULL,
    ID_MEDICO   NUMBER NOT NULL,
    ID_LEITO    NUMBER,

    FOREIGN KEY (ID_PACIENTE) REFERENCES PACIENTE(ID_PACIENTE),
    FOREIGN KEY (ID_MEDICO) REFERENCES MEDICO(ID_MEDICO),
    FOREIGN KEY (ID_LEITO) REFERENCES LEITO(ID_LEITO)
);

CREATE TABLE ATENDIMENTO_EXAME (
    ID_ATENDIMENTO_EXAME NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    DATA_SOLICITACAO DATE NOT NULL,

    ID_ATENDIMENTO NUMBER NOT NULL,
    ID_EXAME       NUMBER NOT NULL,

    FOREIGN KEY (ID_ATENDIMENTO) REFERENCES ATENDIMENTO(ID_ATENDIMENTO),
    FOREIGN KEY (ID_EXAME) REFERENCES EXAME(ID_EXAME)
);

CREATE TABLE ATENDIMENTO_ENFERMEIRO (
    ID_ATENDIMENTO_ENFERMEIRO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,

    ID_ATENDIMENTO NUMBER NOT NULL,
    ID_ENFERMEIRO  NUMBER NOT NULL,

    FOREIGN KEY (ID_ATENDIMENTO) REFERENCES ATENDIMENTO(ID_ATENDIMENTO),
    FOREIGN KEY (ID_ENFERMEIRO)  REFERENCES ENFERMEIRO(ID_ENFERMEIRO)
);

CREATE TABLE FINANCEIRO (
    ID_FINANCEIRO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ID_ATENDIMENTO NUMBER NOT NULL,
    VALOR NUMBER(10,2) NOT NULL
    TIPO_PAGAMENTO VARCHAR2(200),

    FOREIGN KEY (ID_ATENDIMENTO) REFERENCES ATENDIMENTO(ID_ATENDIMENTO)
);

CREATE TABLE HISTORICO_FINANCEIRO (
    ID_HISTORICO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ID_FINANCEIRO NUMBER NOT NULL,
    CAMPO_ALTERADO VARCHAR2(200),
    VALOR_ANTIGO VARCHAR2(200),
    VALOR_NOVO VARCHAR2(200),
    DATA_ALTERACAO DATE DEFAULT SYSDATE,

    FOREIGN KEY (ID_FINANCEIRO) REFERENCES FINANCEIRO(ID_FINANCEIRO)
);

CREATE TABLE HISTORICO_ATENDIMENTO (
    ID_HISTORICO NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    ID_ATENDIMENTO NUMBER NOT NULL,
    CAMPO_ALTERADO VARCHAR2(200),
    VALOR_ANTIGO VARCHAR2(200),
    VALOR_NOVO VARCHAR2(200),
    DATA_ALTERACAO DATE DEFAULT SYSDATE,

    FOREIGN KEY (ID_ATENDIMENTO) REFERENCES ATENDIMENTO(ID_ATENDIMENTO)
);
